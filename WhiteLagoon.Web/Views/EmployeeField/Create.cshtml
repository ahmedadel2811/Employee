@model EmployeeField

<div class="container mt-4">
    <h2 class="mb-4">Add New Employee Field</h2>

    <form asp-action="Create" method="post" class="needs-validation" novalidate>
        <div class="mb-3">
            <label asp-for="Name" class="form-label"></label>
            <input asp-for="Name" class="form-control" />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Type" class="form-label"></label>
            <select asp-for="Type" class="form-select" asp-items="Html.GetEnumSelectList<FieldType>()" id="fieldTypeSelect"></select>
            <span asp-validation-for="Type" class="text-danger"></span>
        </div>

        <div class="form-check mb-3">
            <input asp-for="IsRequired" class="form-check-input" type="checkbox" id="isRequiredCheck" />
            <label asp-for="IsRequired" class="form-check-label">Is Required?</label>
        </div>

        <div class="mb-3" id="dropdownOptionsContainer">
            <label asp-for="DropdownOptions" class="form-label">
                Dropdown Options (comma-separated)
            </label>
            <input asp-for="DropdownOptions" class="form-control" />
            <span asp-validation-for="DropdownOptions" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-success">
            <i class="bi bi-save"></i> Save
        </button>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        const fieldTypeSelect = document.getElementById("fieldTypeSelect");
        const dropdownOptionsContainer = document.getElementById("dropdownOptionsContainer");

        function toggleDropdownOptions() {
            if (fieldTypeSelect.value === "3") { 
                dropdownOptionsContainer.style.display = "block";
            } else {
                dropdownOptionsContainer.style.display = "none";
            }
        }

        fieldTypeSelect.addEventListener("change", toggleDropdownOptions);

        toggleDropdownOptions();
    </script>
}
